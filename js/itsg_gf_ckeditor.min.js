function itsg_gf_wysiwyg_ckeditor_function(e){if("1"==itsg_gf_ckeditor_settings.is_form_editor)for(i in CKEDITOR.instances)CKEDITOR.instances[i].destroy();!function(e){"use strict";var t=itsg_gf_ckeditor_settings.ckeditor_fields;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i],s=i;console.log("gravity-forms-wysiwyg-ckeditor :: field_id: "+s);var a=n.source,o=n.basicstyles,r=n.clipboard,d=n.paragraph,_=n.links,g=n.document,c=n.editing,l=n.insert,f=n.styles,m=n.colors,u=n.tools,y=n.about,p=itsg_gf_ckeditor_settings.extra_plugins,h=itsg_gf_ckeditor_settings.remove_plugins,C=itsg_gf_ckeditor_settings.editor_height,w=!!itsg_gf_ckeditor_settings.enable_scayt,k=itsg_gf_ckeditor_settings.scayt_language,T=itsg_gf_ckeditor_settings.editor_skin,D=!!itsg_gf_ckeditor_settings.enable_count_spaces;e(function(){e('.gform_wrapper .gform_wysiwyg_ckeditor:not(.wysiwyg_exclude) textarea:not([disabled="disabled"],.wysiwyg_exclude), .gform_wrapper .gform_page:not([style="display:none;"],.wysiwyg_exclude) .gform_wysiwyg_ckeditor:not(.wysiwyg_exclude) textarea:not([disabled=disabled],.wysiwyg_exclude), #field_settings textarea:not([disabled=disabled],#gfield_bulk_add_input,#field_calculation_formula,.wysiwyg_exclude,#field_placeholder_textarea), .gf_entry_wrap .postbox .gform_wysiwyg_ckeditor:not(.wysiwyg_exclude) textarea:not([disabled=disabled],.wysiwyg_exclude)').each(function(){if(e(this).ckeditor(CKEDITOR.tools.extend({scayt_autoStartup:w,scayt_sLang:k,scayt_disableOptionsStorage:"lang",height:C+"px",linkShowTargetTab:!1,skin:T,extraPlugins:p,removePlugins:h,wordcount:{showParagraphs:!1,showWordCount:!1,showCharCount:!0,maxCharCount:e(this).attr("data-maxlen"),hardLimit:!0,countSpacesAsChars:D},toolbar:[{name:"source",items:a},{name:"basicstyles",items:o},{name:"clipboard",items:r},{name:"paragraph",items:d},{name:"links",items:_},{name:"document",items:g},{name:"editing",items:c},{name:"insert",items:l},"/",{name:"styles",items:f},{name:"colors",items:m},{name:"tools",items:u},{name:"about",items:y}],allowedContent:!0,filebrowserImageUploadUrl:itsg_gf_ckeditor_settings.admin_url+"?action=itsg_gf_wysiwyg_ckeditor_upload&form_id="+itsg_gf_ckeditor_settings.form_id})),CKEDITOR.on("instanceReady",function(e){e.editor.on("paste",function(e){e.data.html='\x3c!-- class="Mso" --\x3e'+e.data.html},null,null,9),e.editor.on("paste",function(e){e.data.html=e.data.html.replace(/<p>\s*<\/p>/g,"")},null,null,11)}),CKEDITOR.on("dialogDefinition",function(e){var t,i=e.data.name,n=e.data.definition;(e.data.definition.resizable=CKEDITOR.DIALOG_RESIZE_NONE,"link"==i)&&((t=n.getContents("info")).remove("protocol"),n.getContents("target").get("linkTargetType").default=itsg_gf_ckeditor_settings.link_target,n.removeContents("advanced"));if("image"==i&&(n.removeContents("advanced"),n.removeContents("Link"),(t=n.getContents("info")).remove("txtBorder"),t.remove("txtHSpace"),t.remove("txtVSpace"),t.remove("txtWidth"),t.remove("txtHeight"),t.remove("ratioLock"),"1"==itsg_gf_ckeditor_settings.is_minimum_php_version&&"1"==itsg_gf_ckeditor_settings.enable_upload_image)){var s=e.data.definition,a=s.onShow;s.onShow=function(){a.apply(this,arguments),!1===this.imageEditMode&&this.selectPage("Upload")}}}),"1"==itsg_gf_ckeditor_settings.is_form_editor)for(var t in CKEDITOR.instances)setTimeout(function(){CKEDITOR.instances[t].on("change",function(i){"field_description"==i.sender.name?SetFieldDescription(this.getData()):"field_content"==i.sender.name?SetFieldProperty("content",this.getData()):"field_default_value_textarea"==i.sender.name?SetFieldProperty("defaultValue",this.getData()):"infobox_more_info_field"==i.sender.name?SetFieldProperty("infobox_more_info_field",this.getData()):(CKEDITOR.instances[t].updateElement(),e(CKEDITOR.instances.gwtermsofservice_terms.element.$).change())})},500),CKEDITOR.instances[t].on("loaded",function(e){"field_description"==e.sender.name?SetFieldDescription(this.getData()):"field_content"==e.sender.name?SetFieldProperty("content",this.getData()):"field_default_value_textarea"==e.sender.name?SetFieldProperty("defaultValue",this.getData()):"infobox_more_info_field"==e.sender.name?SetFieldProperty("infobox_more_info_field",this.getData()):CKEDITOR.instances[t].updateElement(),this.setData(this.getData())});if("1"==itsg_gf_ckeditor_settings.is_dpr_installed&&"1"!==itsg_gf_ckeditor_settings.is_admin)for(var t in CKEDITOR.instances)CKEDITOR.instances[t].on("change",function(){CKEDITOR.instances[t].updateElement(),!0})})})}}(jQuery)}if("1"==itsg_gf_ckeditor_settings.is_form_editor){jQuery(document).bind("gform_load_field_settings",function(e){itsg_gf_wysiwyg_ckeditor_function(jQuery(this))}),jQuery("input#field_multiple_files").on("change",function(e){for(name in CKEDITOR.instances)CKEDITOR.instances[name].destroy(!0)});var StartChangeProductTypeCK=StartChangeProductType;StartChangeProductType=function(e){for(name in CKEDITOR.instances)CKEDITOR.instances[name].destroy(!0);StartChangeProductTypeCK(e)};var StartChangeShippingTypeCK=StartChangeShippingType;StartChangeShippingType=function(e){for(name in CKEDITOR.instances)CKEDITOR.instances[name].destroy(!0);StartChangeShippingTypeCK(e)};var StartChangeInputTypeCK=StartChangeInputType;StartChangeInputType=function(e){for(name in CKEDITOR.instances)CKEDITOR.instances[name].destroy(!0);StartChangeInputTypeCK(e)}}else"1"==itsg_gf_ckeditor_settings.is_entry_detail?jQuery(document).ready(function(e){itsg_gf_wysiwyg_ckeditor_function(jQuery(this))}):(jQuery(document).bind("gform_post_render",function(e){itsg_gf_wysiwyg_ckeditor_function(jQuery(this))}),gform.addAction("gform_post_conditional_logic_field_action",function(e,t,i,n,s){"show"==t&&itsg_gf_wysiwyg_ckeditor_function()}));