!function(e){e.fn.textareaCount=function(a,r){function n(){return p.html(t()),"undefined"!=typeof r&&r.call(this,l()),!0}function t(){var e=f.val(),r=e.replace(/\s/g,"").length,n="\\s*(?:\\S\\s*){0,"+a.maxCharacterSize+"}",t=new RegExp(n,"g"),l=e.match(t)?e.match(t):" ",c=new RegExp(" ","g"),h=String(l).match(c)?String(l).match(c).length:0,S=new RegExp("[\r\n]","g"),w=String(l).match(S)?String(l).match(S).length:0;if(a.maxCharacterSize>0){a.maxCharacterSize+h+w;r>=a.maxCharacterSize&&(e=e.substring(0,a.maxCharacterSize+h+w));var C=s(e),z=a.maxCharacterSize-C;if(o()||(z=a.maxCharacterSize),r>z){var y=this.scrollTop;f.val(e.substring(0,z+h+w)),this.scrollTop=y}p.removeClass(a.warningStyle),z-r<=a.warningNumber&&p.addClass(a.warningStyle),m=f.val().replace(/\s/g,"").length+C,o()||(m=f.val().replace(/\s/g,"").length),x=g(u(f.val())),d=v-m}else{var C=s(e);m=f.val().replace(/\s/g,"").length+C,o()||(m=f.val().replace(/\s/g,"").length),x=g(u(f.val()))}return i()}function i(){var e=a.displayFormat;return e=e.replace("#input",m),e=e.replace("#words",x),v>0&&(e=e.replace("#max",v),e=e.replace("#left",d)),e}function l(){var e={input:m,max:v,left:d,words:x};return e}function c(e){return e.next(".charleft")}function o(){var e=navigator.appVersion;return-1!=e.toLowerCase().indexOf("win")?!0:!1}function s(e){for(var a=0,r=0;r<e.length;r++)"\n"==e.charAt(r)&&a++;return 0}function u(e){var a=e+" ",r=/^[^A-Za-z0-9]+/gi,n=a.replace(r,""),t=rExp=/[^A-Za-z0-9]+/gi,i=n.replace(t," "),l=i.split(" ");return l}function g(e){var a=e.length-1;return a}var h={maxCharacterSize:-1,originalStyle:"originalTextareaInfo",warningStyle:"warningTextareaInfo",warningNumber:0,displayFormat:"#input characters | #words words"},a=e.extend(h,a),f=e(this);e("<div class='charleft'>&nbsp;</div>").insertAfter(f);var p=({width:f.width()},c(f));p.addClass(a.originalStyle);var m=0,v=a.maxCharacterSize,d=0,x=0;f.bind("keyup",function(e){n()}).bind("mouseover",function(e){setTimeout(function(){n()},10)}).bind("paste",function(e){setTimeout(function(){n()},10)}),n()}}(jQuery);